{"is_source_file": true, "format": "TypeScript", "description": "This is a TypeScript source file defining an Angular service class ApiService that handles HTTP communications with a backend API for managing notes, authentication, categories, and user profiles.", "external_files": ["../../environments/environment", "./models", "./auth.service"], "external_methods": ["inject (from @angular/core)", "environment.API_BASE_URL", "AuthService.getToken()"], "published": ["ApiService"], "classes": [{"name": "ApiService", "description": "A low-level Angular service handling HTTP requests for authentication, user profile, categories, and notes operations."}], "methods": [{"name": "headers", "description": "Constructs HTTP headers, including Content-Type and Authorization token if available."}, {"name": "handle", "description": "Handles HTTP responses, parses JSON, and throws errors for non-OK responses."}, {"name": "login", "description": "Authenticates a user with email and password, returning a token and user profile."}, {"name": "register", "description": "Registers a new user with optional name, returns a token and user profile."}, {"name": "me", "description": "Fetches the current authenticated user profile."}, {"name": "getCategories", "description": "Retrieves list of categories."}, {"name": "queryNotes", "description": "Queries notes based on provided filters."}, {"name": "getNote", "description": "Fetches a specific note by ID."}, {"name": "createNote", "description": "Creates a new note with provided payload."}, {"name": "updateNote", "description": "Updates an existing note by ID with provided payload."}, {"name": "deleteNote", "description": "Deletes a note by ID."}], "calls": ["fetch", "this.handle"], "search-terms": ["Angular API service", "Notes backend HTTP", "AuthService", "environment.API_BASE_URL", "Notes CRUD", "getToken"], "state": 2, "file_id": 24, "knowledge_revision": 54, "git_revision": "", "ctags": [{"_type": "tag", "name": "ApiService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^export class ApiService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "auth", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^  private auth = inject(AuthService);$/", "language": "TypeScript", "kind": "property", "scope": "ApiService", "scopeKind": "class"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^  private base = environment.API_BASE_URL;$/", "language": "TypeScript", "kind": "property", "scope": "ApiService", "scopeKind": "class"}, {"_type": "tag", "name": "detail", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^      let detail: any;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const h = new Headers();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^      const message = detail?.message || detail?.error || res.statusText || 'Request failed';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const params = new URLSearchParams();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const res = await fetch(`${this.base}\\/auth\\/login`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const res = await fetch(`${this.base}\\/auth\\/me`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const res = await fetch(`${this.base}\\/auth\\/register`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const res = await fetch(`${this.base}\\/categories`, { headers: this.headers(false) });$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const res = await fetch(`${this.base}\\/notes?${params.toString()}`, { headers: this.headers(/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const res = await fetch(`${this.base}\\/notes\\/${id}`, { headers: this.headers(false) });$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const res = await fetch(`${this.base}\\/notes\\/${id}`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const res = await fetch(`${this.base}\\/notes`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const text = await res.text();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-17963-17985/notes_frontend/src/app/core/api.service.ts", "pattern": "/^    const token = this.auth.getToken();$/", "language": "TypeScript", "kind": "constant"}], "hash": "452c66adc5aefbe4b04a003840ba17ee", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/app/core/api.service.ts", "fields": [{"name": "private auth = inject(AuthService);", "scope": "ApiService", "scopeKind": "class", "description": "unavailable"}, {"name": "private base = environment.API_BASE_URL;", "scope": "ApiService", "scopeKind": "class", "description": "unavailable"}, {"name": "let detail: any;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"54": ""}]}